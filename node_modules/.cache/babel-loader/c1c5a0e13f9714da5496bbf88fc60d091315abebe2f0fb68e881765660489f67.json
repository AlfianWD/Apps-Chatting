{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"view login\"\n};\nconst _hoisted_2 = {\n  class: \"form-inner\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Welcome to Chit Chat\", -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\"\n}, \"Username\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn-login\",\n  type: \"submit\"\n}, \"Login\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  key: 1,\n  class: \"view chat\"\n};\nconst _hoisted_7 = {\n  class: \"chat-box\",\n  ref: \"chatBox\"\n};\nconst _hoisted_8 = {\n  class: \"message-inner\"\n};\nconst _hoisted_9 = {\n  class: \"username\"\n};\nconst _hoisted_10 = {\n  class: \"content\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn-send\",\n  type: \"submit\"\n}, \"Send\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return $setup.state.username === '' || $setup.state.username === null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"form\", {\n    class: \"login-form\",\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $setup.Login && $setup.Login(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.inputUsername = $event),\n    placeholder: \"Siapa Kamu ?\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.inputUsername]]), _hoisted_5])], 32 /* HYDRATE_EVENTS */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"header\", null, [_createElementVNode(\"button\", {\n    class: \"logout\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.Logout && $setup.Logout(...args))\n  }, \"Logout\"), _createElementVNode(\"h1\", null, \"Welcome, \" + _toDisplayString($setup.state.username), 1 /* TEXT */)]), _createElementVNode(\"section\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.state.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.key,\n      class: _normalizeClass(message.username == $setup.state.username ? 'message current-user' : 'message')\n    }, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, _toDisplayString(message.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_10, _toDisplayString(message.content), 1 /* TEXT */)])], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), _createElementVNode(\"footer\", null, [_createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $setup.SendMessage && $setup.SendMessage(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.inputMessage = $event),\n    placeholder: \"Ketikan disini...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.inputMessage]]), _hoisted_11], 32 /* HYDRATE_EVENTS */)])]));\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","ref","$setup","state","username","_createElementBlock","_hoisted_1","onSubmit","_cache","_withModifiers","args","Login","_hoisted_2","_hoisted_3","_hoisted_4","inputUsername","$event","placeholder","_hoisted_5","_hoisted_6","onClick","Logout","_toDisplayString","_hoisted_7","_Fragment","_renderList","messages","message","key","_normalizeClass","_hoisted_8","_hoisted_9","_hoisted_10","content","SendMessage","inputMessage","_hoisted_11"],"sources":["C:\\Users\\ALFIAN WAHYU\\Documents\\Coding\\Latihan_Coding\\Vue_js\\com.alfian.09040620045\\src\\App.vue"],"sourcesContent":["<template>\n  <div\n    class=\"view login\"\n    v-if=\"state.username === '' || state.username === null\"\n  >\n    <form class=\"login-form\" @submit.prevent=\"Login\">\n      <div class=\"form-inner\">\n        <h1>Welcome to Chit Chat</h1>\n        <label for=\"username\">Username</label>\n        <input type=\"text\" v-model=\"inputUsername\" placeholder=\"Siapa Kamu ?\" />\n        <button class=\"btn-login\" type=\"submit\">Login</button>\n      </div>\n    </form>\n  </div>\n\n  <div class=\"view chat\" v-else>\n    <header>\n      <button class=\"logout\" @click=\"Logout\">Logout</button>\n      <h1>Welcome, {{ state.username }}</h1>\n    </header>\n    <section class=\"chat-box\" ref=\"chatBox\">\n      <div\n        v-for=\"message in state.messages\"\n        :key=\"message.key\"\n        :class=\"\n          message.username == state.username\n            ? 'message current-user'\n            : 'message'\n        \"\n      >\n        <div class=\"message-inner\">\n          <div class=\"username\">{{ message.username }}</div>\n          <div class=\"content\">{{ message.content }}</div>\n        </div>\n      </div>\n    </section>\n    <footer>\n      <form @submit.prevent=\"SendMessage\">\n        <input\n          type=\"text\"\n          v-model=\"inputMessage\"\n          placeholder=\"Ketikan disini...\"\n        />\n        <button class=\"btn-send\" type=\"submit\">Send</button>\n      </form>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport { reactive, onMounted, ref, watch, nextTick } from \"vue\";\nimport db from \"./db\";\n\nexport default {\n  setup() {\n    const chatBoxRef = ref(null);\n    const inputUsername = ref(\"\");\n    const inputMessage = ref(\"\");\n\n    const state = reactive({\n      username: \"\",\n      messages: [],\n      maxMessages: 1,\n      chatBox: null,\n    });\n\n    const Login = () => {\n      if (inputUsername.value != \"\" || inputUsername.value != null) {\n        state.username = inputUsername.value;\n        inputUsername.value = \"\";\n\n        // Set referensi elemen chat-box saat komponen dimuat\n        chatBoxRef.value = document.querySelector(\".chat-box\");\n\n        // Watch untuk melakukan scroll ke bawah saat state.messages berubah\n        watch(\n          () => state.username,\n          () => {\n            nextTick(() => {\n              chatBoxRef.value.scrollTop = chatBoxRef.value.scrollHeight;\n            });\n          }\n        );\n      }\n    };\n\n    const Logout = () => {\n      state.username = \"\";\n    };\n\n    const SendMessage = () => {\n      // const messagesRef = require(\"./db\").default.database().ref(\"messages\");\n      const messagesRef = db.database().ref(\"messages\");\n\n      if (inputMessage.value === \"\" || inputMessage.value === null) {\n        return;\n      }\n\n      const message = {\n        username: state.username,\n        content: inputMessage.value,\n      };\n      messagesRef.push(message);\n      inputMessage.value = \"\";\n\n      chatBoxRef.value.scrollTop = chatBoxRef.value.scrollHeight;\n    };\n\n    onMounted(() => {\n      const messagesRef = db.database().ref(\"messages\");\n\n      messagesRef.on(\"value\", (snapshot) => {\n        const data = snapshot.val();\n\n        if (data) {\n          let messages = [];\n          Object.keys(data).forEach((key) => {\n            messages.push({\n              id: key,\n              username: data[key].username,\n              content: data[key].content,\n            });\n          });\n\n          // Set referensi elemen chat-box saat komponen dimuat\n          chatBoxRef.value = document.querySelector(\".chat-box\");\n\n          // Watch untuk melakukan scroll ke bawah saat state.messages berubah\n          watch(\n            () => state.messages,\n            () => {\n              nextTick(() => {\n                chatBoxRef.value.scrollTop = chatBoxRef.value.scrollHeight;\n              });\n            }\n          );\n\n          state.messages = messages;\n        }\n      });\n    });\n\n    return {\n      inputUsername,\n      Login,\n      state,\n      inputMessage,\n      SendMessage,\n      Logout,\n      chatBoxRef,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\">\n* {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n\n  margin: 0;\n  padding: 0;\n  align-items: center;\n  box-sizing: border-box;\n}\n\n.login {\n  position: fixed;\n  left: 25%;\n  transform: translate(-30%, -50%);\n  box-shadow: 0px 0px 35px 2px black;\n  border-radius: 15px;\n  margin: 270px;\n  padding: 50px;\n  background-color: rgb(34, 165, 99);\n\n  h1 {\n    margin-bottom: 50px;\n  }\n\n  label {\n    display: block;\n    margin-bottom: 15px;\n    font-size: 16px;\n    transition: 0.4s;\n  }\n\n  input[type=\"text\"] {\n    appearance: none;\n    border: none;\n    outline: none;\n    background: none;\n\n    display: block;\n    width: 100%;\n    padding: 10px 15px;\n    border-radius: 8px;\n    margin-top: 15px;\n\n    color: black;\n    font-size: 18px;\n\n    box-shadow: 0px 0px 0px rgb(0, 0, 0, 0);\n    background-color: #f3f3f3;\n\n    transition: 0.4s;\n\n    &::placeholder {\n      color: #888;\n      transition: 0.4s;\n    }\n  }\n\n  button {\n    margin-top: 15px;\n    margin-left: 85px;\n    padding: 10px;\n    width: 50%;\n    background: none;\n    border: 1px solid #ffffff;\n    letter-spacing: 3px;\n    cursor: pointer;\n    font-size: 16px;\n    color: white;\n    border-radius: 5px;\n  }\n\n  button:hover {\n    background: rgba(12, 30, 15, 0.5);\n  }\n}\n\n.chat {\n  box-shadow: 0px 0px 35px 2px black;\n  transform: translate(0%, 6%);\n  border-radius: 15px;\n  margin-left: 270px;\n  margin-right: 270px;\n  padding: 50px;\n  background-color: rgb(34, 165, 99);\n\n  .chat-box {\n    overflow-y: scroll;\n    max-height: 200px;\n    border-radius: 24px 24px 0px 0px;\n    background-color: #fff;\n    box-shadow: 0px 0px 12px rgba(100, 100, 100, 0.2);\n    flex: 1 1 100%;\n    padding: 30px;\n\n    .message {\n      display: flex;\n      margin-bottom: 15px;\n\n      .message-inner {\n        .username {\n          color: #000000;\n          font-size: 16px;\n          margin-bottom: 5px;\n          padding-left: 15px;\n          padding-right: 15px;\n        }\n\n        .content {\n          display: inline-block;\n          padding: 10px 20px;\n          background-color: #f3f3f3;\n          border-radius: 999px;\n\n          color: #000000;\n          font-size: 18px;\n          line-height: 1.2em;\n          text-align: left;\n        }\n      }\n\n      &.current-user {\n        margin-top: 30px;\n        justify-content: flex-end;\n        text-align: right;\n\n        .message-inner {\n          max-width: 75%;\n\n          .content {\n            color: #ffffff;\n            font-weight: 600;\n            background-color: #ea526f;\n          }\n        }\n      }\n    }\n  }\n\n  .logout {\n    margin-top: 15px;\n    margin-bottom: 10px;\n    padding: 5px;\n    width: 35%;\n    background: none;\n    border: 1px solid #ffffff;\n    letter-spacing: 3px;\n    cursor: pointer;\n    font-size: 12px;\n    color: white;\n    border-radius: 5px;\n  }\n\n  .logout:hover {\n    background: rgba(12, 30, 15, 0.5);\n  }\n\n  h1 {\n    margin-bottom: 50px;\n  }\n\n  section {\n    border-radius: 24px 24px 0px 0px;\n    background-color: #fff;\n    box-shadow: 0px 0px 12px rgba(100, 100, 100, 0.2);\n    flex: 1 1 100%;\n    padding: 50px;\n  }\n\n  input[type=\"text\"] {\n    appearance: none;\n    border: none;\n    outline: none;\n    background: none;\n\n    display: block;\n    width: 100%;\n    padding: 10px 15px;\n    border-radius: 8px;\n    margin-top: 15px;\n\n    color: black;\n    font-size: 18px;\n\n    box-shadow: 0px 0px 0px rgb(0, 0, 0, 0);\n    background-color: #f3f3f3;\n\n    transition: 0.4s;\n\n    &::placeholder {\n      color: #888;\n      transition: 0.4s;\n    }\n  }\n\n  .btn-send {\n    margin-top: 15px;\n    margin-left: 65px;\n    padding: 10px;\n    width: 50%;\n    background: none;\n    border: 1px solid #ffffff;\n    letter-spacing: 3px;\n    cursor: pointer;\n    font-size: 16px;\n    color: white;\n    border-radius: 5px;\n  }\n\n  .btn-send:hover {\n    background: rgba(12, 30, 15, 0.5);\n  }\n}\n</style>\n"],"mappings":";;;EAEIA,KAAK,EAAC;;;EAICA,KAAK,EAAC;AAAY;gCACrBC,mBAAA,CAA6B,YAAzB,sBAAoB;gCACxBA,mBAAA,CAAsC;EAA/BC,GAAG,EAAC;AAAU,GAAC,UAAQ;gCAE9BD,mBAAA,CAAsD;EAA9CD,KAAK,EAAC,WAAW;EAACG,IAAI,EAAC;GAAS,OAAK;;;EAK9CH,KAAK,EAAC;;;EAKAA,KAAK,EAAC,UAAU;EAACI,GAAG,EAAC;;;EAUrBJ,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAU;;EAChBA,KAAK,EAAC;AAAS;iCAWtBC,mBAAA,CAAoD;EAA5CD,KAAK,EAAC,UAAU;EAACG,IAAI,EAAC;GAAS,MAAI;;;SAxCzCE,MAAA,CAAAC,KAAK,CAACC,QAAQ,WAAWF,MAAA,CAAAC,KAAK,CAACC,QAAQ,a,cAF/CC,mBAAA,CAYM,OAZNC,UAYM,GARJR,mBAAA,CAOO;IAPDD,KAAK,EAAC,YAAY;IAAEU,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUR,MAAA,CAAAS,KAAA,IAAAT,MAAA,CAAAS,KAAA,IAAAD,IAAA,CAAK;MAC7CZ,mBAAA,CAKM,OALNc,UAKM,GAJJC,UAA6B,EAC7BC,UAAsC,E,gBACtChB,mBAAA,CAAwE;IAAjEE,IAAI,EAAC,MAAM;+DAAUE,MAAA,CAAAa,aAAa,GAAAC,MAAA;IAAEC,WAAW,EAAC;iDAA3Bf,MAAA,CAAAa,aAAa,E,GACzCG,UAAsD,C,iDAK5Db,mBAAA,CA+BM,OA/BNc,UA+BM,GA9BJrB,mBAAA,CAGS,iBAFPA,mBAAA,CAAsD;IAA9CD,KAAK,EAAC,QAAQ;IAAEuB,OAAK,EAAAZ,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAER,MAAA,CAAAmB,MAAA,IAAAnB,MAAA,CAAAmB,MAAA,IAAAX,IAAA,CAAM;KAAE,QAAM,GAC7CZ,mBAAA,CAAsC,YAAlC,WAAS,GAAAwB,gBAAA,CAAGpB,MAAA,CAAAC,KAAK,CAACC,QAAQ,iB,GAEhCN,mBAAA,CAeU,WAfVyB,UAeU,I,kBAdRlB,mBAAA,CAaMmB,SAAA,QAAAC,WAAA,CAZcvB,MAAA,CAAAC,KAAK,CAACuB,QAAQ,EAAzBC,OAAO;yBADhBtB,mBAAA,CAaM;MAXHuB,GAAG,EAAED,OAAO,CAACC,GAAG;MAChB/B,KAAK,EAAAgC,eAAA,CAAaF,OAAO,CAACvB,QAAQ,IAAIF,MAAA,CAAAC,KAAK,CAACC,QAAQ,G;QAMrDN,mBAAA,CAGM,OAHNgC,UAGM,GAFJhC,mBAAA,CAAkD,OAAlDiC,UAAkD,EAAAT,gBAAA,CAAzBK,OAAO,CAACvB,QAAQ,kBACzCN,mBAAA,CAAgD,OAAhDkC,WAAgD,EAAAV,gBAAA,CAAxBK,OAAO,CAACM,OAAO,iB;0DAI7CnC,mBAAA,CASS,iBARPA,mBAAA,CAOO;IAPAS,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUR,MAAA,CAAAgC,WAAA,IAAAhC,MAAA,CAAAgC,WAAA,IAAAxB,IAAA,CAAW;sBAChCZ,mBAAA,CAIE;IAHAE,IAAI,EAAC,MAAM;+DACFE,MAAA,CAAAiC,YAAY,GAAAnB,MAAA;IACrBC,WAAW,EAAC;iDADHf,MAAA,CAAAiC,YAAY,E,GAGvBC,WAAoD,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, onMounted, ref } from \"vue\";\nimport db from \"./db\";\nexport default {\n  setup() {\n    const inputUsername = ref(\"\");\n    const inputMessage = ref(\"\");\n    const state = reactive({\n      username: \"\",\n      messages: [],\n      maxMessages: 1\n    });\n    const Login = () => {\n      if (inputUsername.value != \"\" || inputUsername.value != null) {\n        state.username = inputUsername.value;\n        inputUsername.value = \"\";\n\n        //scroll down\n        setTimeout(() => {\n          window.scrollTo(20, document.body.scrollHeight);\n        }, 20);\n      }\n    };\n    const Logout = () => {\n      state.username = \"\";\n    };\n    const SendMessage = () => {\n      // const messagesRef = require(\"./db\").default.database().ref(\"messages\");\n      const messagesRef = db.database().ref(\"messages\");\n      if (inputMessage.value === \"\" || inputMessage.value === null) {\n        return;\n      }\n      const message = {\n        username: state.username,\n        content: inputMessage.value\n      };\n      messagesRef.push(message);\n      inputMessage.value = \"\";\n    };\n    onMounted(() => {\n      const messagesRef = db.database().ref(\"messages\");\n      messagesRef.on(\"value\", snapshot => {\n        const data = snapshot.val();\n        let messages = [];\n        Object.keys(data).forEach(key => {\n          messages.push({\n            id: key,\n            username: data[key].username,\n            content: data[key].content\n          });\n          //scroll dowm\n          setTimeout(() => {\n            window.scrollTo(20, document.body.scrollHeight);\n          }, 20);\n        });\n        state.messages = messages;\n      });\n    });\n    return {\n      inputUsername,\n      Login,\n      state,\n      inputMessage,\n      SendMessage,\n      Logout\n    };\n  }\n};","map":{"version":3,"names":["reactive","onMounted","ref","db","setup","inputUsername","inputMessage","state","username","messages","maxMessages","Login","value","setTimeout","window","scrollTo","document","body","scrollHeight","Logout","SendMessage","messagesRef","database","message","content","push","on","snapshot","data","val","Object","keys","forEach","key","id"],"sources":["C:\\Users\\ALFIAN WAHYU\\Documents\\Coding\\Latihan_Coding\\Vue_js\\com.alfian.09040620045\\src\\App.vue"],"sourcesContent":["<template>\n  <div\n    class=\"view login\"\n    v-if=\"state.username === '' || state.username === null\"\n  >\n    <form class=\"login-form\" @submit.prevent=\"Login\">\n      <div class=\"form-inner\">\n        <h1>Welcome to Chit Chat</h1>\n        <label for=\"username\">Username</label>\n        <input type=\"text\" v-model=\"inputUsername\" placeholder=\"Siapa Kamu ?\" />\n        <button class=\"btn-login\" type=\"submit\">Login</button>\n      </div>\n    </form>\n  </div>\n\n  <div class=\"view chat\" v-else>\n    <header>\n      <button class=\"logout\" @click=\"Logout\">Logout</button>\n      <h1>Welcome, {{ state.username }}</h1>\n    </header>\n    <section class=\"chat-box\">\n      <div\n        v-for=\"message in state.messages\"\n        :key=\"message.key\"\n        :class=\"\n          message.username == state.username\n            ? 'message current-user'\n            : 'message'\n        \"\n      >\n        <div class=\"message-inner\">\n          <div class=\"username\">{{ message.username }}</div>\n          <div class=\"content\">{{ message.content }}</div>\n        </div>\n      </div>\n    </section>\n    <footer>\n      <form @submit.prevent=\"SendMessage\">\n        <input\n          type=\"text\"\n          v-model=\"inputMessage\"\n          placeholder=\"Ketikan disini...\"\n        />\n        <button class=\"btn-send\" type=\"submit\">Send</button>\n      </form>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport { reactive, onMounted, ref } from \"vue\";\nimport db from \"./db\";\n\nexport default {\n  setup() {\n    const inputUsername = ref(\"\");\n    const inputMessage = ref(\"\");\n\n    const state = reactive({\n      username: \"\",\n      messages: [],\n      maxMessages: 1,\n    });\n\n    const Login = () => {\n      if (inputUsername.value != \"\" || inputUsername.value != null) {\n        state.username = inputUsername.value;\n        inputUsername.value = \"\";\n\n        //scroll down\n        setTimeout(() => {\n          window.scrollTo(20, document.body.scrollHeight);\n        }, 20);\n      }\n    };\n\n    const Logout = () => {\n      state.username = \"\";\n    };\n\n    const SendMessage = () => {\n      // const messagesRef = require(\"./db\").default.database().ref(\"messages\");\n      const messagesRef = db.database().ref(\"messages\");\n\n      if (inputMessage.value === \"\" || inputMessage.value === null) {\n        return;\n      }\n\n      const message = {\n        username: state.username,\n        content: inputMessage.value,\n      };\n\n      messagesRef.push(message);\n      inputMessage.value = \"\";\n    };\n\n    onMounted(() => {\n      const messagesRef = db.database().ref(\"messages\");\n\n      messagesRef.on(\"value\", (snapshot) => {\n        const data = snapshot.val();\n\n        let messages = [];\n        Object.keys(data).forEach((key) => {\n          messages.push({\n            id: key,\n            username: data[key].username,\n            content: data[key].content,\n          });\n          //scroll dowm\n          setTimeout(() => {\n            window.scrollTo(20, document.body.scrollHeight);\n          }, 20);\n        });\n\n        state.messages = messages;\n      });\n    });\n\n    return {\n      inputUsername,\n      Login,\n      state,\n      inputMessage,\n      SendMessage,\n      Logout,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\">\n* {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n\n  margin: 0;\n  padding: 0;\n  align-items: center;\n  box-sizing: border-box;\n}\n\n.login {\n  position: fixed;\n  left: 25%;\n  transform: translate(-30%, -50%);\n  box-shadow: 0px 0px 35px 2px black;\n  border-radius: 15px;\n  margin: 270px;\n  padding: 50px;\n  background-color: rgb(34, 165, 99);\n\n  h1 {\n    margin-bottom: 50px;\n  }\n\n  label {\n    display: block;\n    margin-bottom: 15px;\n    font-size: 16px;\n    transition: 0.4s;\n  }\n\n  input[type=\"text\"] {\n    appearance: none;\n    border: none;\n    outline: none;\n    background: none;\n\n    display: block;\n    width: 100%;\n    padding: 10px 15px;\n    border-radius: 8px;\n    margin-top: 15px;\n\n    color: black;\n    font-size: 18px;\n\n    box-shadow: 0px 0px 0px rgb(0, 0, 0, 0);\n    background-color: #f3f3f3;\n\n    transition: 0.4s;\n\n    &::placeholder {\n      color: #888;\n      transition: 0.4s;\n    }\n  }\n\n  button {\n    margin-top: 15px;\n    margin-left: 85px;\n    padding: 10px;\n    width: 50%;\n    background: none;\n    border: 1px solid #ffffff;\n    letter-spacing: 3px;\n    cursor: pointer;\n    font-size: 16px;\n    color: white;\n    border-radius: 5px;\n  }\n\n  button:hover {\n    background: rgba(12, 30, 15, 0.5);\n  }\n}\n\n.chat {\n  box-shadow: 0px 0px 35px 2px black;\n  transform: translate(0%, 6%);\n  border-radius: 15px;\n  margin-left: 270px;\n  margin-right: 270px;\n  padding: 50px;\n  background-color: rgb(34, 165, 99);\n\n  .chat-box {\n    overflow-y: scroll;\n    max-height: 200px;\n    border-radius: 24px 24px 0px 0px;\n    background-color: #fff;\n    box-shadow: 0px 0px 12px rgba(100, 100, 100, 0.2);\n    flex: 1 1 100%;\n    padding: 30px;\n\n    .message {\n      display: flex;\n      margin-bottom: 15px;\n\n      .message-inner {\n        .username {\n          color: #000000;\n          font-size: 16px;\n          margin-bottom: 5px;\n          padding-left: 15px;\n          padding-right: 15px;\n        }\n\n        .content {\n          display: inline-block;\n          padding: 10px 20px;\n          background-color: #f3f3f3;\n          border-radius: 999px;\n\n          color: #000000;\n          font-size: 18px;\n          line-height: 1.2em;\n          text-align: left;\n        }\n      }\n\n      &.current-user {\n        margin-top: 30px;\n        justify-content: flex-end;\n        text-align: right;\n\n        .message-inner {\n          max-width: 75%;\n\n          .content {\n            color: #ffffff;\n            font-weight: 600;\n            background-color: #ea526f;\n          }\n        }\n      }\n    }\n  }\n\n  .logout {\n    margin-top: 15px;\n    margin-bottom: 10px;\n    padding: 5px;\n    width: 35%;\n    background: none;\n    border: 1px solid #ffffff;\n    letter-spacing: 3px;\n    cursor: pointer;\n    font-size: 12px;\n    color: white;\n    border-radius: 5px;\n  }\n\n  .logout:hover {\n    background: rgba(12, 30, 15, 0.5);\n  }\n\n  h1 {\n    margin-bottom: 50px;\n  }\n\n  section {\n    border-radius: 24px 24px 0px 0px;\n    background-color: #fff;\n    box-shadow: 0px 0px 12px rgba(100, 100, 100, 0.2);\n    flex: 1 1 100%;\n    padding: 50px;\n  }\n\n  input[type=\"text\"] {\n    appearance: none;\n    border: none;\n    outline: none;\n    background: none;\n\n    display: block;\n    width: 100%;\n    padding: 10px 15px;\n    border-radius: 8px;\n    margin-top: 15px;\n\n    color: black;\n    font-size: 18px;\n\n    box-shadow: 0px 0px 0px rgb(0, 0, 0, 0);\n    background-color: #f3f3f3;\n\n    transition: 0.4s;\n\n    &::placeholder {\n      color: #888;\n      transition: 0.4s;\n    }\n  }\n\n  .btn-send {\n    margin-top: 15px;\n    margin-left: 65px;\n    padding: 10px;\n    width: 50%;\n    background: none;\n    border: 1px solid #ffffff;\n    letter-spacing: 3px;\n    cursor: pointer;\n    font-size: 16px;\n    color: white;\n    border-radius: 5px;\n  }\n\n  .btn-send:hover {\n    background: rgba(12, 30, 15, 0.5);\n  }\n}\n</style>\n"],"mappings":";AAkDA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,GAAE,QAAS,KAAK;AAC9C,OAAOC,EAAC,MAAO,MAAM;AAErB,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,aAAY,GAAIH,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMI,YAAW,GAAIJ,GAAG,CAAC,EAAE,CAAC;IAE5B,MAAMK,KAAI,GAAIP,QAAQ,CAAC;MACrBQ,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE;IACf,CAAC,CAAC;IAEF,MAAMC,KAAI,GAAIA,CAAA,KAAM;MAClB,IAAIN,aAAa,CAACO,KAAI,IAAK,EAAC,IAAKP,aAAa,CAACO,KAAI,IAAK,IAAI,EAAE;QAC5DL,KAAK,CAACC,QAAO,GAAIH,aAAa,CAACO,KAAK;QACpCP,aAAa,CAACO,KAAI,GAAI,EAAE;;QAExB;QACAC,UAAU,CAAC,MAAM;UACfC,MAAM,CAACC,QAAQ,CAAC,EAAE,EAAEC,QAAQ,CAACC,IAAI,CAACC,YAAY,CAAC;QACjD,CAAC,EAAE,EAAE,CAAC;MACR;IACF,CAAC;IAED,MAAMC,MAAK,GAAIA,CAAA,KAAM;MACnBZ,KAAK,CAACC,QAAO,GAAI,EAAE;IACrB,CAAC;IAED,MAAMY,WAAU,GAAIA,CAAA,KAAM;MACxB;MACA,MAAMC,WAAU,GAAIlB,EAAE,CAACmB,QAAQ,CAAC,CAAC,CAACpB,GAAG,CAAC,UAAU,CAAC;MAEjD,IAAII,YAAY,CAACM,KAAI,KAAM,EAAC,IAAKN,YAAY,CAACM,KAAI,KAAM,IAAI,EAAE;QAC5D;MACF;MAEA,MAAMW,OAAM,GAAI;QACdf,QAAQ,EAAED,KAAK,CAACC,QAAQ;QACxBgB,OAAO,EAAElB,YAAY,CAACM;MACxB,CAAC;MAEDS,WAAW,CAACI,IAAI,CAACF,OAAO,CAAC;MACzBjB,YAAY,CAACM,KAAI,GAAI,EAAE;IACzB,CAAC;IAEDX,SAAS,CAAC,MAAM;MACd,MAAMoB,WAAU,GAAIlB,EAAE,CAACmB,QAAQ,CAAC,CAAC,CAACpB,GAAG,CAAC,UAAU,CAAC;MAEjDmB,WAAW,CAACK,EAAE,CAAC,OAAO,EAAGC,QAAQ,IAAK;QACpC,MAAMC,IAAG,GAAID,QAAQ,CAACE,GAAG,CAAC,CAAC;QAE3B,IAAIpB,QAAO,GAAI,EAAE;QACjBqB,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CAACI,OAAO,CAAEC,GAAG,IAAK;UACjCxB,QAAQ,CAACgB,IAAI,CAAC;YACZS,EAAE,EAAED,GAAG;YACPzB,QAAQ,EAAEoB,IAAI,CAACK,GAAG,CAAC,CAACzB,QAAQ;YAC5BgB,OAAO,EAAEI,IAAI,CAACK,GAAG,CAAC,CAACT;UACrB,CAAC,CAAC;UACF;UACAX,UAAU,CAAC,MAAM;YACfC,MAAM,CAACC,QAAQ,CAAC,EAAE,EAAEC,QAAQ,CAACC,IAAI,CAACC,YAAY,CAAC;UACjD,CAAC,EAAE,EAAE,CAAC;QACR,CAAC,CAAC;QAEFX,KAAK,CAACE,QAAO,GAAIA,QAAQ;MAC3B,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,OAAO;MACLJ,aAAa;MACbM,KAAK;MACLJ,KAAK;MACLD,YAAY;MACZc,WAAW;MACXD;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}